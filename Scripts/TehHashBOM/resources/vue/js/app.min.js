(function(e){function t(t){for(var n,s,l=t[0],o=t[1],c=t[2],d=0,f=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&f.push(i[s][0]),i[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,l=1;l<a.length;l++){var o=a[l];0!==i[o]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"blue-grey lighten-5",height:"128","hide-on-scroll":""}},[a("div",{staticClass:"d-flex align-center"},[a("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Logo",contain:"",src:e.getPath("Icon_128.png"),transition:"scale-transition",width:"128"}})],1),a("v-toolbar-title",[e._v("Teh Hash BOM")]),a("v-spacer")],1),a("v-main",{staticClass:"pb-5"},[a("BomTable")],1),a("v-footer",[a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e._v(" "+e._s((new Date).toLocaleDateString())+" "+e._s((new Date).toLocaleTimeString())+" â€” Teh Hash BOM ")])],1)],1)},r=[],s=a("d4ec"),l=a("bee2"),o=a("262e"),c=a("2caf"),u=a("9ab4"),d=a("1b40"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("h3",{staticClass:"title py-10"},[e._v("BOM Items")]),a("v-row",{staticClass:"text-center"},[a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headersBOM,items:e.getBomItems(),"item-key":"id","disable-pagination":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.image",fn:function(e){var t=e.item;return[a("div",{staticClass:"p-2"},[a("v-img",{attrs:{contain:"",src:t.image,alt:t.name,"max-height":"128","max-width":"128"}})],1)]}}])})],1)],1),a("h3",{staticClass:"title py-10"},[e._v("Profiles")]),a("v-row",{staticClass:"text-center"},[a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{staticClass:"elevation-1 mb-5",attrs:{headers:e.headers,items:e.getProfiles(-1),"item-key":"id","show-select":"","disable-pagination":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.image",fn:function(e){var t=e.item;return[a("div",{staticClass:"p-2"},[a("v-img",{attrs:{contain:"",src:t.image,alt:t.name,"max-height":"128","max-width":"128"}})],1)]}}]),model:{value:e.selectedItems,callback:function(t){e.selectedItems=t},expression:"selectedItems"}}),a("div",{staticClass:"text-center pt-2"},[a("v-btn",{staticClass:"mr-2",attrs:{color:"primary"},on:{click:e.addToLayout}},[e._v(" Add selected to layout ")])],1)],1)],1),e._l(e.profileLayouts,(function(t,n){return a("div",{key:"entity-"+n},[a("h3",{staticClass:"subtitle-1 py-5"},[e._v("Profile Layout")]),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.getProfiles(n),"item-key":"id","disable-pagination":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.image",fn:function(e){var t=e.item;return[a("div",{staticClass:"p-2"},[a("v-img",{attrs:{contain:"",src:t.image,alt:t.name,"max-height":"128","max-width":"128"}})],1)]}},{key:"item.layout_index",fn:function(t){var n=t.item;return[a("v-btn",{staticClass:"mr-2",attrs:{color:"primary"},on:{click:function(t){return e.clearLayout(n)}}},[e._v(" Delete from layout ")])]}}],null,!0)})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"10",md:"8",lg:"6"}},[a("v-card",{ref:"form",refInFor:!0},[a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card-text",[a("v-text-field",{attrs:{label:"raw bar length"},model:{value:t.max_length,callback:function(a){e.$set(t,"max_length",a)},expression:"entity.max_length"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card-text",[a("v-text-field",{attrs:{label:"cut with"},model:{value:t.spacing,callback:function(a){e.$set(t,"spacing",a)},expression:"entity.spacing"}})],1)],1)],1)],1),a("v-divider",{staticClass:"mt-2"}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(a){return e.recalculateLayout(n,t.max_length,t.spacing)}}},[e._v(" Recalculate cut list ")])],1)],1)],1)],1),a("v-row",{staticClass:"pb-5",attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[e.getLayoutBars(n).length>0||e.getUnfitedChunks(n).length>0?a("v-card",{staticClass:"pa-2",attrs:{outlined:""}},[a("v-card-title",[e._v(" Cut list ")]),e.getUnfitedChunks(n).length>0?a("v-alert",{attrs:{type:"error"}},[e._v(" Unfited Chunks: "),e._l(e.getUnfitedChunks(n),(function(t,n){return a("v-chip",{key:"UnfitedChunk-"+n},[e._v(" "+e._s(t)+" ")])}))],2):e._e(),e._l(e.getLayoutBars(n),(function(t,n){return a("div",{key:"lay-"+n},[a("v-card-subtitle",[e._v(" #"+e._s(n+1)+" len:"+e._s(t.length)+" used: "+e._s(t.lengthUsed())+" ")]),a("v-card-text",[a("table",{staticClass:"blue-grey darken-1",staticStyle:{width:"100%"},attrs:{border:"0"}},[a("tr",[e._l(t.chunks,(function(n,i){return a("td",{key:"chunk-"+i,class:n<10?"red darken-2":"amber",style:{width:n>=10?100*n/t.length+"%":"5px","text-align":"center",height:"25px","min-width":"10px"}},[a("strong",[e._v(e._s(n))])])})),a("td",{staticClass:"blue-grey lighten-3",style:{width:100*t.lengthRemaining()/t.length-1+"%","text-align":"center",height:"25px"}},[a("strong",[e._v(" "+e._s(Math.round(100*(t.lengthRemaining()+Number.EPSILON))/100)+" ")])])],2)])])],1)}))],2):e._e()],1)],1)],1)}))],2)},h=[],g=(a("b0c0"),a("159b"),a("4de4"),function e(){Object(s["a"])(this,e),this.layout_index=-1}),p=(a("4e827"),a("a9e3"),function(){function e(t){Object(s["a"])(this,e),this.chunks=[],this.length=t}return Object(l["a"])(e,[{key:"addChunk",value:function(e){return e=Number(e),e>this.lengthRemaining()||this.chunks.push(e),!1}},{key:"lengthRemaining",value:function(){return this.length-this.lengthUsed()}},{key:"lengthUsed",value:function(){return this.chunks.reduce((function(e,t){return e+t}),0)}}]),e}()),v=function(){function e(t,a){Object(s["a"])(this,e),this.chunks=[],this.unfitedChunks=[],this.rawBars=[],this.max_length=t,this.spacing=a}return Object(l["a"])(e,[{key:"getRawBars",value:function(){return this.rawBars}},{key:"getUnfitedChunks",value:function(){return this.unfitedChunks}},{key:"addChunk",value:function(e){e>this.max_length?this.unfitedChunks.push(e):this.chunks.push(e)}},{key:"calculate",value:function(){var e=this,t=this.chunks.sort((function(e,t){return e>t?-1:1}));t.forEach((function(t){var a=!1;if(e.rawBars.forEach((function(n){!a&&n.lengthRemaining()>=t&&(n.addChunk(t),n.lengthRemaining()>0&&n.addChunk(e.spacing),a=!0)})),!a){var n=new p(e.max_length);n.addChunk(t),n.lengthRemaining()>0&&n.addChunk(e.spacing),e.rawBars.push(n)}})),console.log(this.rawBars)}}]),e}(),m=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;if(Object(s["a"])(this,a),e=t.call(this),e.defalut_max_length=3e3,e.defalut_spacing=2,e.headersBOM=[{text:"Image",value:"image",sortable:!1},{text:"Name",align:"start",value:"name"},{text:"instances",value:"instances"}],e.headers=[{text:"Image",value:"image",sortable:!1},{text:"Name",align:"start",value:"name"},{text:"instances",value:"instances"},{text:"size",value:"profile_size"},{text:"length",value:"profile_length"},{text:"layout_index",value:"layout_index"}],e.selectedItems=[],e.bomItems=[],e.profileLayouts=[],"undefined"===typeof generatedBOMTable&&"undefined"===typeof generatedBeamTable){var n=new g;n.name="60x40",n.id="0c1add5f-0229-4df7-9161-bb62a0d07fce",n.profile_size="60x40",n.image="Icon.png",n.instances=2,n.boundingX=1,n.boundingY=1,n.boundingZ=1,n.profile_length=150,e.bomItems.push(n),n=new g,n.name="60x40",n.id="1c1add5f-0229-4df7-9161-bb62a0d07fce",n.profile_size="60x40",n.image="Icon.png",n.instances=1,n.boundingX=1,n.boundingY=1,n.boundingZ=1,n.is_profile=!0,n.profile_length=200,e.bomItems.push(n),n=new g,n.name="80x40",n.id="2c1add5f-0229-4df7-9161-bb62a0d07fce",n.profile_size="80x40",n.image="Icon.png",n.instances=1,n.boundingX=1,n.boundingY=1,n.boundingZ=1,n.is_profile=!0,n.profile_length=120,e.bomItems.push(n)}else"undefined"!==typeof generatedBOMTable&&generatedBOMTable.forEach((function(t){t.layout_index=-1,e.bomItems.push(t)})),"undefined"!==typeof generatedBeamTable&&generatedBeamTable.forEach((function(t){t.layout_index=-1,e.bomItems.push(t)}));return e}return Object(l["a"])(a,[{key:"getProfiles",value:function(e){return this.bomItems.filter((function(t){return t.is_profile&&t.layout_index==e}))}},{key:"getBomItems",value:function(){return this.bomItems.filter((function(e){return!e.is_profile}))}},{key:"getLayoutBars",value:function(e){return console.log("getLayoutBars",e),this.profileLayouts[e].getRawBars()}},{key:"getUnfitedChunks",value:function(e){return this.profileLayouts[e].getUnfitedChunks()}},{key:"clearLayout",value:function(e){e.layout_index=-1}},{key:"recalculateLayout",value:function(e,t,a){console.log("recalculateLayout",e,t,a);var n=new v(t,a),i=this.getProfiles(e);i.forEach((function(e){for(var t=0;t<e.instances;t++)n.addChunk(e.profile_length)})),this.profileLayouts[e]=n,n.calculate(),console.log(n),this.$forceUpdate()}},{key:"addToLayout",value:function(){var e;console.log(this.selectedItems),0==this.profileLayouts.length?(e=new v(3e3,2),this.profileLayouts.push(e)):e=this.profileLayouts[0],this.selectedItems.forEach((function(e){e.layout_index=0})),this.selectedItems=[]}}]),a}(d["c"]);Object(u["a"])([Object(d["b"])()],m.prototype,"msg",void 0),m=Object(u["a"])([d["a"]],m);var b=m,y=b,_=a("2877"),x=a("6544"),k=a.n(x),C=a("0798"),w=a("8336"),O=a("b0af"),j=a("99d9"),B=a("cc20"),I=a("62ad"),L=a("a523"),V=a("8fea"),T=a("ce7e"),P=a("adda"),S=a("0fd9"),M=a("2fa4"),U=a("8654"),R=Object(_["a"])(y,f,h,!1,null,null,null),E=R.exports;k()(R,{VAlert:C["a"],VBtn:w["a"],VCard:O["a"],VCardActions:j["a"],VCardSubtitle:j["b"],VCardText:j["c"],VCardTitle:j["d"],VChip:B["a"],VCol:I["a"],VContainer:L["a"],VDataTable:V["a"],VDivider:T["a"],VImg:P["a"],VRow:S["a"],VSpacer:M["a"],VTextField:U["a"]});var D=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return Object(l["a"])(a,[{key:"getPath",value:function(e){return"undefined"===typeof asset_dirrectory?e:asset_dirrectory+"/"+e}}]),a}(d["c"]);D=Object(u["a"])([Object(d["a"])({components:{BomTable:E}})],D);var $=D,z=$,A=a("7496"),N=a("40dc"),F=a("553a"),X=a("f6c4"),Y=a("2a7f"),Z=Object(_["a"])(z,i,r,!1,null,null,null),H=Z.exports;k()(Z,{VApp:A["a"],VAppBar:N["a"],VCol:I["a"],VFooter:F["a"],VImg:P["a"],VMain:X["a"],VSpacer:M["a"],VToolbarTitle:Y["a"]});var J=a("f309");n["a"].use(J["a"]);var q=new J["a"]({});n["a"].config.productionTip=!1,new n["a"]({vuetify:q,render:function(e){return e(H)}}).$mount("#app")}});
//# sourceMappingURL=app.min.js.map